<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>QGIS Setting Manager by 3nids</title>
    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script src="javascripts/main.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

  </head>
  <body>

      <header>
        <h1>QGIS Setting Manager</h1>
        <p>QGIS setting manager is a python module to easily manage read/write settings and set/get corresponding widgets in a plugin.</p>
      </header>

      <div id="banner">
        <span id="logo"></span>

        <a href="https://github.com/3nids/qgissettingmanager" class="button fork"><strong>View On GitHub</strong></a>
        <div class="downloads">
          <span>Downloads:</span>
          <ul>
            <li><a href="https://github.com/3nids/qgissettingmanager/zipball/master" class="button">ZIP</a></li>
            <li><a href="https://github.com/3nids/qgissettingmanager/tarball/master" class="button">TAR</a></li>
          </ul>
        </div>
      </div><!-- end banner -->

    <div class="wrapper">
      <nav>
        <ul></ul>
      </nav>
      <section>
        <h1>About</h1>

<p>Easily manage the settings in your <a href="http://www.qgis.org">QGIS</a> plugin.</p>

<p>This module can:</p>

<ul>
<li>manage <strong>different types of settings</strong> (bool, string, color, integer, double, stringlist)</li>
<li>
<strong>read and write settings</strong> in QGIS application or in the QGIS project</li>
<li>automatically <strong>set widgets from corresponding setting</strong>
</li>
<li>automatically <strong>write settings from widgets of a dialog</strong>
</li>
</ul><h2>The main setting class</h2>

<p>All your settings will be saved in a single class, which will subclass SettingManager.</p>

<div class="highlight"><pre><span class="kn">from</span> <span class="nn">qgissettingmanager</span> <span class="kn">import</span> <span class="o">*</span>

<span class="k">class</span> <span class="nc">MySettings</span><span class="p">(</span><span class="n">SettingManager</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">SettingManager</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">myPluginName</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">addSetting</span><span class="p">(</span><span class="s">"myVariable"</span><span class="p">,</span> <span class="s">"bool"</span><span class="p">,</span> <span class="s">"global"</span><span class="p">,</span> <span class="bp">True</span><span class="p">)</span>
</pre></div>

<p>You add as many settings as you want using <em>addSetting</em> method:</p>

<div class="highlight"><pre><span class="n">addSetting</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">settingType</span><span class="p">,</span> <span class="n">scope</span><span class="p">,</span> <span class="n">defaultValue</span><span class="p">,</span> <span class="n">options</span><span class="o">=</span><span class="p">{})</span>
</pre></div>

<ul>
<li>
<strong>name</strong>: the name of the setting</li>
<li>
<strong>settingType</strong>: <em>bool</em>, <em>string</em>, <em>color</em>, <em>integer</em>, <em>double</em> or <em>stringlist</em>
</li>
<li>
<strong>scope</strong>: <em>global</em> or <em>project</em>
</li>
<li>
<strong>defaultValue</strong>: the default value of the setting (type must corrsepond)</li>
<li>
<strong>options</strong>: a dictionary of options for widgets (see <a href="#possiblewidgets">possible widgets</a>)</li>
</ul><h2>Access the settings</h2>

<p>Instantiate your settings class in your current class:</p>

<div class="highlight"><pre><span class="kn">import</span> <span class="nn">MySettings</span>
<span class="bp">self</span><span class="o">.</span><span class="n">settings</span> <span class="o">=</span> <span class="n">MySettings</span><span class="p">()</span>
</pre></div>

<p>The settings are easily accessed using the <code>value</code> and <code>setValue</code> methods:</p>

<div class="highlight"><pre><span class="n">myVariable</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">settings</span><span class="o">.</span><span class="n">value</span><span class="p">(</span><span class="s">"myVariable"</span><span class="p">)</span>
<span class="bp">self</span><span class="o">.</span><span class="n">settings</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="s">"myVariable"</span><span class="p">,</span> <span class="bp">False</span><span class="p">)</span>
</pre></div>

<h2>Match settings with widgets of a dialog</h2>

<h3>Quick start</h3>

<p>You can associate a setting to a defined widget in a dialog (or a dockable window). The first point is to <strong>name the widget as the setting name</strong>.
Then, your dialog class subclasses the <code>SettingDialog</code> class:</p>

<div class="highlight"><pre><span class="k">class</span> <span class="nc">MyDialog</span><span class="p">(</span><span class="n">QDialog</span><span class="p">,</span> <span class="n">Ui_myDialog</span><span class="p">,</span> <span class="n">SettingDialog</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">QDialog</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setupUi</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">settings</span> <span class="o">=</span> <span class="n">MySettings</span><span class="p">()</span>
        <span class="n">SettingDialog</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">settings</span><span class="p">)</span>
</pre></div>

<p>Hence, must dialog is shown, all widgets which are named as some setting will be set to the corresponding value. On dialog acceptance, the setting will be set according to their widget.</p>

<p>To control which setting has been associated to a widget, you can write <code>print self.widgetList()</code>.</p>

<h3>Settings' update behavior</h3>

<p>You can have a different behavior using <code>SettingDialog</code> parameters:</p>

<div class="highlight"><pre><span class="n">SettingDialog</span><span class="p">(</span><span class="n">settingManager</span><span class="p">,</span> <span class="n">setValuesOnDialogAccepted</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">setValueOnWidgetUpdate</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
</pre></div>

<ul>
<li>setValuesOnDialogAccepted: if <code>True</code>, settings values are set when dialog is accepted;</li>
<li>setValueOnWidgetUpdate: if <code>True</code>, settings are set as soon as the widgets is modified.</li>
</ul><h3>Check something before updating the settings</h3>

<p>You can override the <code>SettingDialog.onBeforeAcceptDialog()</code> method to check your settings.
Settings will be saved only if method returns <code>True</code>.</p>

<h3>Using showEvent</h3>

<p>Be warned that <code>SettingDialog</code> implements <code>showEvent</code> method. Therefore, if you redefine it in your dialog class, you have to write:</p>

<div class="highlight"><pre><span class="k">def</span> <span class="nf">showEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">e</span><span class="p">):</span>
    <span class="n">settingDialog</span><span class="o">.</span><span class="n">showEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>
    <span class="c"># do your own stuff</span>
</pre></div>

<p><a name="possiblewidgets"></a></p>

<h3>Possible widgets</h3>

<p>The widgets are automatically detected by the manager. If the type of widget is not handled, an error is raised.</p>

<p><strong>Strings</strong></p>

<ul>
<li>QLineEdit</li>
<li>QComboBox (setting can be defined as the current item text or <a href="http://qt-project.org/doc/qt-4.8/qcombobox.html#itemData">data</a>: specify option <em>comboMode</em> as <em>data</em> (default) or <em>text</em>)</li>
<li>QButtonGroup (the setting is set as the checked widget text in the button group)</li>
</ul><p><strong>Booleans</strong></p>

<ul>
<li>QCheckBox</li>
<li>Any checkable widget (groupbox, etc.)</li>
</ul><p><strong>Colors</strong></p>

<ul>
<li>Any widget but labels or pushbuttons are recommended (it uses QGIS <a href="http://qgis.org/api/classQgsColorButton.html">color button</a>). Use option <em>dialogTitle</em> to set the dialog title.</li>
</ul><p><strong>Integers</strong></p>

<ul>
<li>QLineEdit</li>
<li>QSpinBox</li>
<li>QSlider</li>
<li>QComboBox (setting is set as the combo box index)</li>
</ul><p><strong>Doubles</strong></p>

<ul>
<li>QLineEdit</li>
<li>QDoubleSpinBox</li>
</ul><p><strong>Stringlist</strong></p>

<ul>
<li>QListWidget (checks items having their <em>text</em> in the list)</li>
<li>QButtonGroup (checks items having their <em>name</em> in the list)</li>
</ul><p>New types of widget are easily added, if one is missing, do not hesitate to <a href="https://github.com/3nids/qgissettingmanager/issues">ask</a>!</p>

<h2>Using git submodules</h2>

<p>To use this module, you can easily copy the files and put them in your project.
A more elegant way is to use <a href="http://git-scm.com/book/en/Git-Tools-Submodules">git submodule</a>. Hence, you can keep up with latest improvements. In you plugin directory, do</p>

<pre><code>git submodule add git://github.com/3nids/qgissettingmanager.git
</code></pre>

<p>A folder <em>qgissettingmanager</em> will be added to your plugin directory. However, git only references the module, and you can <code>git pull</code> in this folder to get the last changes.</p>
      </section>
      <footer>
        <p>Project maintained by <a href="https://github.com/3nids">3nids</a></p>
        <p><small>Hosted on GitHub Pages &mdash; Theme by <a href="http://twitter.com/#!/michigangraham">mattgraham</a></small></p>
      </footer>
    </div>
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->
    
  </body>
</html>