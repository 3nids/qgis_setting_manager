<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>QGIS Setting Manager by 3nids</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">QGIS Setting Manager</h1>
      <h2 class="project-tagline">QGIS setting manager is a python module to easily manage read/write settings and set/get corresponding widgets in a plugin.</h2>
      <a href="https://github.com/3nids/qgissettingmanager" class="btn">View on GitHub</a>
      <a href="https://github.com/3nids/qgissettingmanager/zipball/master" class="btn">Download .zip</a>
      <a href="https://github.com/3nids/qgissettingmanager/tarball/master" class="btn">Download .tar.gz</a>
    </section>

    <section class="main-content">
      <h2>
<a id="about" class="anchor" href="#about" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>About</h2>

<p>Easily manage the settings in your <a href="http://www.qgis.org">QGIS</a> plugin.</p>

<p>This module can:</p>

<ul>
<li>manage <strong>different types of settings</strong> (bool, string, color, integer, double, stringlist)</li>
<li>
<strong>read and write settings</strong> in QGIS application or in the QGIS project</li>
<li>automatically <strong>set widgets from corresponding setting</strong>
</li>
<li>automatically <strong>write settings from widgets of a dialog</strong>
</li>
</ul>

<h2>
<a id="the-main-setting-class" class="anchor" href="#the-main-setting-class" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>The main setting class</h2>

<p>All your settings shall be saved in a single class, which will subclass SettingManager.</p>

<div class="highlight highlight-source-python"><pre><span class="pl-k">from</span> qgissettingmanager <span class="pl-k">import</span> <span class="pl-k">*</span>

<span class="pl-k">class</span> <span class="pl-en">MySettings</span>(<span class="pl-e">SettingManager</span>):
    <span class="pl-k">def</span> <span class="pl-c1">__init__</span>(<span class="pl-smi"><span class="pl-smi">self</span></span>):
        SettingManager.<span class="pl-c1">__init__</span>(<span class="pl-v">self</span>, my_plugin_name)
        <span class="pl-v">self</span>.add_setting( Bool(<span class="pl-s"><span class="pl-pds">"</span>my_setting<span class="pl-pds">"</span></span>, Scope.Global, <span class="pl-c1">True</span>) )</pre></div>

<p>You may add as many settings as you want using <code>add_setting</code> method:</p>

<div class="highlight highlight-source-python"><pre>add_setting( SettingClass( name, scope, default_value, <span class="pl-v">options</span><span class="pl-k">=</span>{} ) )</pre></div>

<ul>
<li>
<code>SettingClass</code>: <code>Bool</code>, <code>String</code>, <code>Color</code>, <code>Integer</code>, <code>Double</code> or <code>Stringlist</code>
</li>
<li>
<code>name</code>: the name of the setting</li>
<li>
<code>scope</code>: <code>Scope.Global</code> or <code>Scope.Project</code>
</li>
<li>
<code>default_value</code>: the default value of the setting (type must correspond)</li>
<li>
<code>options</code>: a dictionary of options for widgets (see <a href="#possiblewidgets">possible widgets</a>)</li>
</ul>

<h3>
<a id="access-the-settings" class="anchor" href="#access-the-settings" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Access the settings</h3>

<p>Instantiate your settings class in your current class:</p>

<div class="highlight highlight-source-python"><pre><span class="pl-k">import</span> MySettings
<span class="pl-v">self</span>.settings <span class="pl-k">=</span> MySettings()</pre></div>

<p>The settings are easily accessed using the <code>value</code> and <code>setValue</code> methods:</p>

<div class="highlight highlight-source-python"><pre>myVariable <span class="pl-k">=</span> <span class="pl-v">self</span>.settings.value(<span class="pl-s"><span class="pl-pds">"</span>myVariable<span class="pl-pds">"</span></span>)
<span class="pl-v">self</span>.settings.set_value(<span class="pl-s"><span class="pl-pds">"</span>myVariable<span class="pl-pds">"</span></span>, <span class="pl-c1">False</span>)</pre></div>

<h3>
<a id="remove-settings" class="anchor" href="#remove-settings" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Remove settings</h3>

<p>Settings can be removed from registry (local or project wise) using <code>MySettings().remove('my_setting')</code>.</p>

<h2>
<a id="match-settings-with-widgets-of-a-dialog" class="anchor" href="#match-settings-with-widgets-of-a-dialog" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Match settings with widgets of a dialog</h2>

<h3>
<a id="quick-start" class="anchor" href="#quick-start" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Quick start</h3>

<p>You can associate a setting to a defined widget in a dialog (or a dockable window). The first condition is to <strong>name the widget as the setting name</strong>.
Then, your dialog class shall subclass the <code>SettingDialog</code> class:</p>

<div class="highlight highlight-source-python"><pre><span class="pl-k">class</span> <span class="pl-en">MyDialog</span>(<span class="pl-e">QDialog</span>, <span class="pl-e">Ui_myDialog</span>, <span class="pl-e">SettingDialog</span>):
    <span class="pl-k">def</span> <span class="pl-c1">__init__</span>(<span class="pl-smi"><span class="pl-smi">self</span></span>):
        QDialog.<span class="pl-c1">__init__</span>(<span class="pl-v">self</span>)
        <span class="pl-v">self</span>.setupUi(<span class="pl-v">self</span>)
        <span class="pl-v">self</span>.settings <span class="pl-k">=</span> MySettings()
        SettingDialog.<span class="pl-c1">__init__</span>(<span class="pl-v">self</span>, <span class="pl-v">self</span>.settings)</pre></div>

<p>Hence, when the dialog is shown, all widgets which are named according to a  setting will be set to the corresponding value. On dialog acceptance, the settings will be set according to the value read from their widget.</p>

<p>To control which setting has been associated to a widget, you can print <code>self.widget_list()</code>.</p>

<h3>
<a id="settings-update-behavior" class="anchor" href="#settings-update-behavior" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Settings' update behavior</h3>

<p>You can have a different behavior using <code>SettingDialog</code> parameters:</p>

<div class="highlight highlight-source-python"><pre>SettingDialog(settingManager, <span class="pl-v">mode</span><span class="pl-k">=</span>UpdateMode.DialogAccept)</pre></div>

<p><code>mode</code> can take the following values:</p>

<ul>
<li>
<code>UpdateMode.DialogAccept</code>: settings values are set when the dialog is accepted <em>(default)</em>;</li>
<li>
<code>UpdateMode.WidgetUpdate</code>: settings are set as soon as the widget is modified.</li>
</ul>

<h3>
<a id="check-something-before-updating-the-settings" class="anchor" href="#check-something-before-updating-the-settings" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Check something before updating the settings</h3>

<p>You can override the <code>SettingDialog.before_accept_dialog()</code> method to check your settings.
Settings will be saved only if the method returns <code>True</code>.</p>

<h3>
<a id="using-showevent" class="anchor" href="#using-showevent" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Using showEvent</h3>

<p>Be warned that <code>SettingDialog</code> implements <code>showEvent</code> method. Therefore, if you redefine it in your dialog class, you have to write:</p>

<div class="highlight highlight-source-python"><pre><span class="pl-k">def</span> <span class="pl-en">showEvent</span>(<span class="pl-smi"><span class="pl-smi">self</span></span>, <span class="pl-smi">e</span>):
    settingDialog.showEvent(<span class="pl-v">self</span>, e)
    <span class="pl-c"># do your own stuff</span></pre></div>

<p><a name="possiblewidgets"></a></p>

<h3>
<a id="possible-widgets" class="anchor" href="#possible-widgets" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Possible widgets</h3>

<p>The widgets are automatically detected by the manager. If the type of widget is not handled, an error is raised.</p>

<p><strong>Strings</strong></p>

<ul>
<li>QLineEdit</li>
<li>QComboBox (setting can be defined as the current item text or <a href="http://qt-project.org/doc/qt-4.8/qcombobox.html#itemData">data</a>: specify option <code>comboMode</code> as <code>data</code> (default) or <code>text</code>)</li>
<li>QButtonGroup (the setting is set as the checked widget text in the button group)</li>
</ul>

<p><strong>Booleans</strong></p>

<ul>
<li>QCheckBox</li>
<li>Any checkable widget (groupbox, etc.)</li>
</ul>

<p><strong>Colors</strong></p>

<ul>
<li>Native QGIS widgets (QgsColorButton, QgsColorButtonV2) or any widget (label or pushbutton are recommended). For standard Qt Widgets, QGIS <a href="http://qgis.org/api/classQgsColorButtonV2.html">color button</a>) will be used. Use options <code>allowAlpha</code> (boolean) to allow transparent colors and <code>dialogTitle</code> to set the dialog title.</li>
</ul>

<p><strong>Integers</strong></p>

<ul>
<li>QLineEdit</li>
<li>QSpinBox</li>
<li>QSlider</li>
<li>QComboBox (setting is set as the combo box index)</li>
</ul>

<p><strong>Doubles</strong></p>

<ul>
<li>QLineEdit</li>
<li>QDoubleSpinBox</li>
</ul>

<p><strong>Stringlist</strong></p>

<ul>
<li>QListWidget (checks items having their <em>text</em> in the list)</li>
<li>QButtonGroup (checks items having their <em>name</em> in the list)</li>
</ul>

<p>New types of widget are easily added, if one is missing, do not hesitate to <a href="https://github.com/3nids/qgissettingmanager/issues">ask</a>!</p>

<h2>
<a id="using-git-submodules" class="anchor" href="#using-git-submodules" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Using git submodules</h2>

<p>To use this module, you can easily copy the files and put them in your project.
A more elegant way is to use <a href="http://git-scm.com/book/en/Git-Tools-Submodules">git submodule</a>. Hence, you can keep up with latest improvements. In you plugin directory, do</p>

<pre><code>git submodule add https://github.com/3nids/qgissettingmanager.git
</code></pre>

<p>A folder <em>qgissettingmanager</em> will be added to your plugin directory. However, git only references the module, and you can <code>git pull</code> in this folder to get the last changes.</p>

      <footer class="site-footer">
        <span class="site-footer-owner"><a href="https://github.com/3nids/qgissettingmanager">QGIS Setting Manager</a> is maintained by <a href="https://github.com/3nids">3nids</a>.</span>

        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</span>
      </footer>

    </section>

  
  </body>
</html>
